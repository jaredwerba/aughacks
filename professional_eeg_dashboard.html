<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional EEG Video Analysis Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 30px; margin-bottom: 30px; text-align: center; }
        .header h1 { color: #667eea; font-size: 2.5em; margin-bottom: 10px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; text-align: center; }
        .stat-value { font-size: 2em; font-weight: bold; color: #667eea; }
        .main-grid { display: grid; grid-template-columns: 300px 1fr; gap: 30px; }
        .sidebar { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 25px; }
        .content { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 25px; }
        .control-group { margin-bottom: 20px; }
        .control-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .control-group select, .control-group input { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; }
        .search-btn { width: 100%; padding: 15px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; }
        .video-list { background: #f8f9fa; border-radius: 10px; padding: 15px; margin-top: 20px; max-height: 300px; overflow-y: auto; }
        .video-item { background: white; padding: 10px; margin: 5px 0; border-radius: 5px; cursor: pointer; border-left: 3px solid #667eea; }
        .video-item:hover { background: #f0f8ff; }
        .video-item.selected { background: #e3f2fd; border-left-color: #f5576c; }
        .results { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 25px; margin-top: 30px; display: none; }
        .result-item { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #4caf50; }
        .similarity-score { font-size: 1.2em; font-weight: bold; color: #4caf50; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-brain"></i> Professional EEG Video Analysis</h1>
            <p>Advanced Neural Pattern Search & Similarity Analysis</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card"><div class="stat-value">1249</div><div>Total Fragments</div></div>
            <div class="stat-card"><div class="stat-value">10</div><div>Videos</div></div>
            <div class="stat-card"><div class="stat-value">3</div><div>Databases</div></div>
            <div class="stat-card"><div class="stat-value">768</div><div>Dimensions</div></div>
        </div>
        
        <div class="main-grid">
            <div class="sidebar">
                <h3><i class="fas fa-search"></i> Search Controls</h3>
                
                <div class="control-group">
                    <label>Database:</label>
                    <select id="database-select" onchange="updateDatabase()">
                        <option value="video_embeddings_5s">5s Fragments (996 total)</option>
<option value="video_embeddings_20s">20s Fragments (243 total)</option>
<option value="video_embeddings">Full Video (10 videos)</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Query Video:</label>
                    <select id="video-select">
                        <option value="">Select video...</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Results:</label>
                    <input type="number" id="top-k" value="5" min="1" max="10">
                </div>
                
                <button class="search-btn" onclick="performSearch()">
                    <i class="fas fa-search"></i> Find Similar Videos
                </button>
                
                <div class="video-list">
                    <h4>ðŸ“¹ Video IDs</h4>
                    <div class="video-item" onclick="selectVideo('lsl_stream_20250809_154545')" data-video="lsl_stream_20250809_154545">1. 154545</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_155123')" data-video="lsl_stream_20250809_155123">2. 155123</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_155739')" data-video="lsl_stream_20250809_155739">3. 155739</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_160350')" data-video="lsl_stream_20250809_160350">4. 160350</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_173815')" data-video="lsl_stream_20250809_173815">5. 173815</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_174138')" data-video="lsl_stream_20250809_174138">6. 174138</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_174635')" data-video="lsl_stream_20250809_174635">7. 174635</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_175111')" data-video="lsl_stream_20250809_175111">8. 175111</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_175524')" data-video="lsl_stream_20250809_175524">9. 175524</div>
<div class="video-item" onclick="selectVideo('lsl_stream_20250809_175632')" data-video="lsl_stream_20250809_175632">10. 175632</div>
                </div>
            </div>
            
            <div class="content">
                <h3><i class="fas fa-chart-line"></i> Similarity Matrix</h3>
                <div id="heatmap-plot" style="height: 500px;"></div>
                
                <h3 style="margin-top: 30px;"><i class="fas fa-chart-bar"></i> Database Comparison</h3>
                <div id="comparison-plot" style="height: 400px;"></div>
            </div>
        </div>
        
        <div id="search-results" class="results">
            <h3><i class="fas fa-search-plus"></i> Search Results</h3>
            <div id="results-content"></div>
        </div>
    </div>

    <script>
        const databases = {"video_embeddings_5s": {"similarity_matrix": [[1.0, 0.07110585272312164, 0.7733588218688965, 0.99517822265625, 0.06177026033401489, 0.053389184176921844, 0.8781070113182068, 0.9116469621658325, 0.8503531217575073, 0.8464294075965881], [0.07110585272312164, 1.0, 0.07775763422250748, 0.0705147460103035, 0.9563589692115784, 0.8725154399871826, 0.3304694592952728, 0.3203081786632538, 0.3124823570251465, 0.31244006752967834], [0.7733588218688965, 0.07775763422250748, 0.9999998807907104, 0.7106890082359314, 0.0663815587759018, 0.05210186168551445, 0.6454190611839294, 0.6610457301139832, 0.6447235345840454, 0.6433972120285034], [0.99517822265625, 0.0705147460103035, 0.7106890082359314, 1.0, 0.060890041291713715, 0.052915308624506, 0.8870773315429688, 0.9195735454559326, 0.8566709160804749, 0.8526830673217773], [0.06177026033401489, 0.9563589692115784, 0.0663815587759018, 0.060890041291713715, 0.9999998807907104, 0.9770084023475647, 0.24052292108535767, 0.26497703790664673, 0.2407309114933014, 0.24048425257205963], [0.053389184176921844, 0.8725154399871826, 0.05210186168551445, 0.052915308624506, 0.9770084023475647, 0.9999999403953552, 0.1683310717344284, 0.21584314107894897, 0.1828683614730835, 0.18260805308818817], [0.8781070113182068, 0.3304694592952728, 0.6454190611839294, 0.8870773315429688, 0.24052292108535767, 0.1683310717344284, 0.9999999403953552, 0.9700411558151245, 0.9663946628570557, 0.9657189846038818], [0.9116469621658325, 0.3203081786632538, 0.6610457301139832, 0.9195735454559326, 0.26497703790664673, 0.21584314107894897, 0.9700411558151245, 1.0, 0.9848669171333313, 0.9832014441490173], [0.8503531217575073, 0.3124823570251465, 0.6447235345840454, 0.8566709160804749, 0.2407309114933014, 0.1828683614730835, 0.9663946628570557, 0.9848669171333313, 1.0, 0.9999489784240723], [0.8464294075965881, 0.31244006752967834, 0.6433972120285034, 0.8526830673217773, 0.24048425257205963, 0.18260805308818817, 0.9657189846038818, 0.9832014441490173, 0.9999489784240723, 1.0000001192092896]], "video_ids": ["lsl_stream_20250809_154545", "lsl_stream_20250809_155123", "lsl_stream_20250809_155739", "lsl_stream_20250809_160350", "lsl_stream_20250809_173815", "lsl_stream_20250809_174138", "lsl_stream_20250809_174635", "lsl_stream_20250809_175111", "lsl_stream_20250809_175524", "lsl_stream_20250809_175632"], "video_short_names": ["154545", "155123", "155739", "160350", "173815", "174138", "174635", "175111", "175524", "175632"], "fragment_count": 996}, "video_embeddings_20s": {"similarity_matrix": [[0.9999998807907104, 0.058812323957681656, 0.6947638392448425, 0.9509749412536621, 0.0459442138671875, 0.04905736446380615, 0.7623412013053894, 0.8145594596862793, 0.7665855288505554, 0.7654522657394409], [0.058812323957681656, 1.0, 0.02751089632511139, 0.06554900109767914, 0.9547039270401001, 0.8714622259140015, 0.3259476125240326, 0.3152827024459839, 0.30546247959136963, 0.30596625804901123], [0.6947638392448425, 0.02751089632511139, 1.000000238418579, 0.4478839933872223, 0.039539583027362823, 0.03061741404235363, 0.23322823643684387, 0.2721613049507141, 0.3020502030849457, 0.3021233379840851], [0.9509749412536621, 0.06554900109767914, 0.4478839933872223, 0.9999997615814209, 0.046697355806827545, 0.052195239812135696, 0.866269052028656, 0.9133334755897522, 0.8442932367324829, 0.8429152965545654], [0.0459442138671875, 0.9547039270401001, 0.039539583027362823, 0.046697355806827545, 1.0, 0.9760868549346924, 0.22516128420829773, 0.25201642513275146, 0.22636355459690094, 0.22684352099895477], [0.04905736446380615, 0.8714622259140015, 0.03061741404235363, 0.052195239812135696, 0.9760868549346924, 1.0, 0.1654984951019287, 0.2179757058620453, 0.18162667751312256, 0.1820565015077591], [0.7623412013053894, 0.3259476125240326, 0.23322823643684387, 0.866269052028656, 0.22516128420829773, 0.1654984951019287, 1.0, 0.9724535346031189, 0.9594357013702393, 0.9591079950332642], [0.8145594596862793, 0.3152827024459839, 0.2721613049507141, 0.9133334755897522, 0.25201642513275146, 0.2179757058620453, 0.9724535346031189, 0.9999999403953552, 0.9767049551010132, 0.9760904312133789], [0.7665855288505554, 0.30546247959136963, 0.3020502030849457, 0.8442932367324829, 0.22636355459690094, 0.18162667751312256, 0.9594357013702393, 0.9767049551010132, 1.0, 0.9999948143959045], [0.7654522657394409, 0.30596625804901123, 0.3021233379840851, 0.8429152965545654, 0.22684352099895477, 0.1820565015077591, 0.9591079950332642, 0.9760904312133789, 0.9999948143959045, 1.0]], "video_ids": ["lsl_stream_20250809_154545", "lsl_stream_20250809_155123", "lsl_stream_20250809_155739", "lsl_stream_20250809_160350", "lsl_stream_20250809_173815", "lsl_stream_20250809_174138", "lsl_stream_20250809_174635", "lsl_stream_20250809_175111", "lsl_stream_20250809_175524", "lsl_stream_20250809_175632"], "video_short_names": ["154545", "155123", "155739", "160350", "173815", "174138", "174635", "175111", "175524", "175632"], "fragment_count": 243}, "video_embeddings": {"similarity_matrix": [[0.9999999403953552, 0.022938599810004234, 0.9736915230751038, 0.9944799542427063, 0.1805848479270935, 0.1361808329820633, 0.0615588054060936, 0.6580784320831299, 0.4126947820186615, 0.8446617126464844], [0.022938599810004234, 1.0, 0.030107391998171806, 0.0274377278983593, 0.6622911691665649, 0.5781545042991638, 0.32628101110458374, 0.2722492218017578, 0.2932589650154114, 0.14840875566005707], [0.9736915230751038, 0.030107391998171806, 1.0, 0.9542056322097778, 0.27749723196029663, 0.22909705340862274, 0.019237607717514038, 0.668143630027771, 0.4033035635948181, 0.8947451710700989], [0.9944799542427063, 0.0274377278983593, 0.9542056322097778, 0.9999999403953552, 0.17324212193489075, 0.13044896721839905, 0.14125804603099823, 0.7010450959205627, 0.4705416262149811, 0.8449975252151489], [0.1805848479270935, 0.6622911691665649, 0.27749723196029663, 0.17324212193489075, 1.0, 0.9839916229248047, 0.15497025847434998, 0.38769927620887756, 0.2752913236618042, 0.36897656321525574], [0.1361808329820633, 0.5781545042991638, 0.22909705340862274, 0.13044896721839905, 0.9839916229248047, 1.0000001192092896, 0.10195282101631165, 0.3222373127937317, 0.21168974041938782, 0.2983042597770691], [0.0615588054060936, 0.32628101110458374, 0.019237607717514038, 0.14125804603099823, 0.15497025847434998, 0.10195282101631165, 0.9999998807907104, 0.7215218544006348, 0.8817993998527527, 0.37005504965782166], [0.6580784320831299, 0.2722492218017578, 0.668143630027771, 0.7010450959205627, 0.38769927620887756, 0.3222373127937317, 0.7215218544006348, 0.9999999403953552, 0.9269143342971802, 0.8945412039756775], [0.4126947820186615, 0.2932589650154114, 0.4033035635948181, 0.4705416262149811, 0.2752913236618042, 0.21168974041938782, 0.8817993998527527, 0.9269143342971802, 0.9999999403953552, 0.7221940755844116], [0.8446617126464844, 0.14840875566005707, 0.8947451710700989, 0.8449975252151489, 0.36897656321525574, 0.2983042597770691, 0.37005504965782166, 0.8945412039756775, 0.7221940755844116, 1.0]], "video_ids": ["lsl_stream_20250809_154545", "lsl_stream_20250809_155123", "lsl_stream_20250809_155739", "lsl_stream_20250809_160350", "lsl_stream_20250809_173815", "lsl_stream_20250809_174138", "lsl_stream_20250809_174635", "lsl_stream_20250809_175111", "lsl_stream_20250809_175524", "lsl_stream_20250809_175632"], "video_short_names": ["154545", "155123", "155739", "160350", "173815", "174138", "174635", "175111", "175524", "175632"], "fragment_count": 10}};
        const dbInfo = {"video_embeddings_5s": {"duration": 5.0, "fragments": 996}, "video_embeddings_20s": {"duration": 20.0, "fragments": 243}, "video_embeddings": {"duration": 599.808, "fragments": 10}};
        
        let currentDb = Object.keys(databases)[0];
        let selectedVideo = null;
        
        function updateDatabase() {
            currentDb = document.getElementById('database-select').value;
            updateVideoSelector();
            createHeatmap();
            createComparison();
        }
        
        function updateVideoSelector() {
            const select = document.getElementById('video-select');
            const videoIds = databases[currentDb].video_ids;
            select.innerHTML = '<option value="">Select video...</option>';
            videoIds.forEach(id => {
                const option = document.createElement('option');
                option.value = id;
                option.textContent = id.replace('lsl_stream_20250809_', '');
                select.appendChild(option);
            });
        }
        
        function selectVideo(videoId) {
            selectedVideo = videoId;
            document.querySelectorAll('.video-item').forEach(item => item.classList.remove('selected'));
            document.querySelector(`[data-video="${videoId}"]`).classList.add('selected');
            document.getElementById('video-select').value = videoId;
        }
        
        function createHeatmap() {
            const data = databases[currentDb];
            const trace = {
                z: data.similarity_matrix,
                x: data.video_short_names,
                y: data.video_short_names,
                type: 'heatmap',
                colorscale: 'Viridis',
                hovertemplate: 'Video Y: %{y}<br>Video X: %{x}<br>Similarity: %{z:.4f}<extra></extra>'
            };
            
            const layout = {
                title: `Video Similarity - ${currentDb.replace('video_embeddings_', '').replace('s', '')}s`,
                xaxis: {title: 'Video IDs', tickangle: 45},
                yaxis: {title: 'Video IDs'},
                height: 500
            };
            
            Plotly.newPlot('heatmap-plot', [trace], layout, {responsive: true});
        }
        
        function createComparison() {
            const dbNames = Object.keys(databases);
            const trace = {
                x: dbNames.map(name => name.replace('video_embeddings_', '').replace('s', '') + 's'),
                y: dbNames.map(name => databases[name].fragment_count),
                type: 'bar',
                marker: {color: '#667eea'}
            };
            
            const layout = {
                title: 'Fragment Count by Database',
                xaxis: {title: 'Database Type'},
                yaxis: {title: 'Fragment Count'},
                height: 400
            };
            
            Plotly.newPlot('comparison-plot', [trace], layout, {responsive: true});
        }
        
        function performSearch() {
            const videoId = document.getElementById('video-select').value;
            const topK = document.getElementById('top-k').value;
            
            if (!videoId) {
                alert('Please select a video first!');
                return;
            }
            
            const data = databases[currentDb];
            const queryIdx = data.video_ids.indexOf(videoId);
            if (queryIdx === -1) return;
            
            const similarities = data.similarity_matrix[queryIdx];
            const results = [];
            
            similarities.forEach((sim, idx) => {
                if (idx !== queryIdx) {
                    results.push({
                        video_id: data.video_ids[idx],
                        video_short: data.video_short_names[idx],
                        similarity: sim
                    });
                }
            });
            
            results.sort((a, b) => b.similarity - a.similarity);
            
            const resultsHtml = results.slice(0, topK).map((result, i) => `
                <div class="result-item">
                    <div class="similarity-score">${i+1}. Similarity: ${result.similarity.toFixed(4)}</div>
                    <div><strong>Video:</strong> ${result.video_short}</div>
                    <div><strong>Full ID:</strong> ${result.video_id}</div>
                </div>
            `).join('');
            
            document.getElementById('results-content').innerHTML = resultsHtml;
            document.getElementById('search-results').style.display = 'block';
            document.getElementById('search-results').scrollIntoView({behavior: 'smooth'});
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            updateVideoSelector();
            createHeatmap();
            createComparison();
        });
    </script>
</body>
</html>